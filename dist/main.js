(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{hR:()=>l,DH:()=>u,Mk:()=>y});class t{constructor(e,t,n,r){this.length=e,this.hits=[],this.killed=!1,this.coordinateX=t,this.coordinateY=n,this.position=r,this.coordinates=[]}hit(e,t){return this.hits.push({coordinateX:e,coordinateY:t}),this.hits.length}isSunk(){return this.length-this.hits.length==0&&(this.killed=!0,!0)}}let n=!1;class r{constructor(){this.ships=[],this.hitsMissed=[],this.sunkedShips=0}addShip(e,r,o,s){const a=new t(o,e,r,s);if(e=+e,r=+r,1===a.length?a.coordinates.push({x:e,y:r}):2===a.length&&"vertical"===a.position?a.coordinates.push({x:e,y:r},{x:e,y:r+1}):2===a.length&&"horizontal"===a.position?a.coordinates.push({x:e,y:r},{x:e+1,y:r}):3===a.length&&"vertical"===a.position?a.coordinates.push({x:e,y:r},{x:e,y:r+1},{x:e,y:r+2}):3===a.length&&"horizontal"===a.position&&a.coordinates.push({x:e,y:r},{x:e+1,y:r},{x:e+2,y:r}),this.ships.length>0)for(let e=0;e<this.ships.length;e++){let t=this.ships[e].coordinates,n=a.coordinates;for(let e=0;e<t.length;e++){if(n[0].x===t[e].x&&n[0].y===t[e].y)return"This coordinates are use";if(n[0].x===t[e].x+1&&n[0].y===t[e].y+1)return"This coordinates are use";if(n[0].x===t[e].x-1&&n[0].y===t[e].y-1)return"This coordinates are use";if(n[0].x===t[e].x+1&&n[0].y===t[e].y-1)return"This coordinates are use";if(n[0].x===t[e].x-1&&n[0].y===t[e].y+1)return"This coordinates are use";if(n[0].x===t[e].x&&n[0].y===t[e].y+1)return"This coordinates are use";if(n[0].x===t[e].x&&n[0].y===t[e].y-1)return"This coordinates are use";if(n[0].x===t[e].x-1&&n[0].y===t[e].y)return"This coordinates are use";if(n[0].x===t[e].x+1&&n[0].y===t[e].y)return"This coordinates are use";if(a.length>1){if(n[1].x===t[e].x&&n[1].y===t[e].y)return"This coordinates are use";if(n[1].x===t[e].x+1&&n[1].y===t[e].y+1)return"This coordinates are use";if(n[1].x===t[e].x-1&&n[1].y===t[e].y-1)return"This coordinates are use";if(n[1].x===t[e].x-1&&n[1].y===t[e].y+1)return"This coordinates are use";if(n[1].x===t[e].x+1&&n[1].y===t[e].y-1)return"This coordinates are use";if(n[1].x===t[e].x&&n[1].y===t[e].y+1)return"This coordinates are use";if(n[1].x===t[e].x&&n[1].y===t[e].y-1)return"This coordinates are use";if(n[1].x===t[e].x-1&&n[1].y===t[e].y)return"This coordinates are use";if(n[1].x===t[e].x+1&&n[1].y===t[e].y)return"This coordinates are use"}if(a.length>2){if(n[2].x===t[e].x&&n[2].y===t[e].y)return"This coordinates are use";if(n[2].x===t[e].x+1&&n[2].y===t[e].y+1)return"This coordinates are use";if(n[2].x===t[e].x-1&&n[2].y===t[e].y-1)return"This coordinates are use";if(n[2].x===t[e].x-1&&n[2].y===t[e].y+1)return"This coordinates are use";if(n[2].x===t[e].x+1&&n[2].y===t[e].y-1)return"This coordinates are use";if(n[2].x===t[e].x&&n[2].y===t[e].y-1)return"This coordinates are use";if(n[2].x===t[e].x&&n[2].y===t[e].y+1)return"This coordinates are use";if(n[2].x===t[e].x+1&&n[2].y===t[e].y)return"This coordinates are use";if(n[2].x===t[e].x-1&&n[2].y===t[e].y)return"This coordinates are use"}}}if(this.ships.push(a),!0===n)return;let d;return d=0===r?e:10*r+e,l[d].style="background-color:green;","horizontal"===s?2===a.length?l[d+1].style="background-color:green;":3===a.length&&(l[d+1].style="background-color:green;",l[d+2].style="background-color:green;"):"vertical"===s&&(2===a.length?l[d+10].style="background-color:green;":3===a.length&&(l[d+10].style="background-color:green;",l[d+20].style="background-color:green;")),9===i.gameboard.ships.length&&(n=!0),a}receiveAttack(e,t){for(let n=0;n<this.ships.length;n++){let r=this.ships[n].coordinates;for(let i=0;i<r.length;i++)if(r[i].x===e&&r[i].y===t)return this.ships[n].hit(e,t),this.ships[n].isSunk()?(this.sunkedShips++,this.endGame()):this.ships[n].hits}let n;return n=0==t?+e:10*+t+e,this.hitsMissed.push(n),n}endGame(){return this.sunkedShips===this.ships.length&&(y.classList.remove("hidden"),u.classList.add("hidden")),!1}}const i=new class{constructor(){this.shoots=[],this.gameboard=new r}welcome(){const e=document.querySelector(".preLoad div input");return document.querySelector("#yourName").innerHTML=e.value,e.value}addShips(e,t,n,r){return this.gameboard.addShip(e,t,n,r),this.gameboard}shoot(e,t){let n={x:e,y:t};return this.shoots.push(n),n}},o=e=>{let t;"player"===e?t=document.querySelector("#divHolder"):"AI"===e&&(t=document.querySelector(`#div${e}Holder`));let n=0;for(let r=0;r<100;r++){const i=document.createElement("div");"player"===e?i.classList.add("gameBoardDiv"):"AI"===e&&i.classList.add("gameBoardDivAI"),r<10?(i.innerHTML=n,n++):10==r?i.innerHTML="1":20==r?i.innerHTML="2":30==r?i.innerHTML="3":40==r?i.innerHTML="4":50==r?i.innerHTML="5":60==r?i.innerHTML="6":70==r?i.innerHTML="7":80==r?i.innerHTML="8":90==r&&(i.innerHTML="9"),t.appendChild(i)}},s=new class{constructor(){this.name="AI",this.gameboard=new r,this.shoots=[],this.score=this.gameboard.sunkedShips,this.counter=0}init(){for(let e=this.counter;this.gameboard.ships.length<10;e++){if(9==this.gameboard.ships.length)return this.gameboard;let e=Math.floor(9*Math.random()),t=Math.floor(9*Math.random()),n=Math.floor(3*Math.random());if(n<2?n="horizontal":n>=2&&(n="vertical"),this.gameboard.ships.length<2)if(e<8&&"horizontal"===n)this.createLongShip(e,t,n);else{if(!(t<8&&"vertical"===n))continue;this.createLongShip(e,t,n)}else if(this.gameboard.ships.length>=2&&this.gameboard.ships.length<5)if(e<9&&"horizontal"===n)this.createMediumShip(e,t,n);else{if(!(t<9&&"vertical"===n))continue;this.createMediumShip(e,t,n)}else this.createSmallShip(e,t,n);this.counter++}}createLongShip(e,t,n){this.gameboard.addShip(e,t,3,n)}createMediumShip(e,t,n){this.gameboard.addShip(e,t,2,n)}createSmallShip(e,t,n){this.gameboard.addShip(e,t,1,n)}},a=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:3,y:0},{x:4,y:0},{x:5,y:0},{x:6,y:0},{x:7,y:0},{x:8,y:0},{x:9,y:0},{x:0,y:1},{x:1,y:1},{x:2,y:1},{x:3,y:1},{x:4,y:1},{x:5,y:1},{x:6,y:1},{x:7,y:1},{x:8,y:1},{x:9,y:1},{x:0,y:2},{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:4,y:2},{x:5,y:2},{x:6,y:2},{x:7,y:2},{x:8,y:2},{x:9,y:2},{x:0,y:3},{x:1,y:3},{x:2,y:3},{x:3,y:3},{x:4,y:3},{x:5,y:3},{x:6,y:3},{x:7,y:3},{x:8,y:3},{x:9,y:3},{x:0,y:4},{x:1,y:4},{x:2,y:4},{x:3,y:4},{x:4,y:4},{x:5,y:4},{x:6,y:4},{x:7,y:4},{x:8,y:4},{x:9,y:4},{x:0,y:5},{x:1,y:5},{x:2,y:5},{x:3,y:5},{x:4,y:5},{x:5,y:5},{x:6,y:5},{x:7,y:5},{x:8,y:5},{x:9,y:5},{x:0,y:6},{x:1,y:6},{x:2,y:6},{x:3,y:6},{x:4,y:6},{x:5,y:6},{x:6,y:6},{x:7,y:6},{x:8,y:6},{x:9,y:6},{x:0,y:7},{x:1,y:7},{x:2,y:7},{x:3,y:7},{x:4,y:7},{x:5,y:7},{x:6,y:7},{x:7,y:7},{x:8,y:7},{x:9,y:7},{x:0,y:8},{x:1,y:8},{x:2,y:8},{x:3,y:8},{x:4,y:8},{x:5,y:8},{x:6,y:8},{x:7,y:8},{x:8,y:8},{x:9,y:8},{x:0,y:9},{x:1,y:9},{x:2,y:9},{x:3,y:9},{x:4,y:9},{x:5,y:9},{x:6,y:9},{x:7,y:9},{x:8,y:9},{x:9,y:9}];let d=[];const c=(e,t,n)=>{document.querySelector(".preLoad div").style="display:none;",document.querySelector(".scoreHolder").classList.add("hidden"),document.querySelector(".showWinner").classList.remove("hidden");const r=document.querySelector("#winner"),i=document.querySelector("#scorePlayerPreLoad"),o=document.querySelector("#scoreAIPreLoad");r.innerHTML=`${e} win!`,i.innerHTML=t,o.innerHTML=n};let h=!1;(()=>{const e=document.createElement("header"),t=document.createElement("h1");t.innerText="BattleShip",e.appendChild(t),document.body.appendChild(e);const n=document.createElement("section");n.classList.add("preLoad");const r=document.createElement("div"),i=document.createElement("label");i.innerText="Type your name";const o=document.createElement("input");o.name="myName";const s=document.createElement("button");s.classList.add("submitMyName"),s.innerText="START",r.appendChild(i),r.appendChild(o),r.appendChild(s),n.appendChild(r);const a=document.createElement("section");a.classList.add("showWinner"),a.classList.add("hidden"),a.innerHTML='<h1 id="winner"></h1>\n    <h2>Player score:</h2>\n    <h2>AI score:</h2>\n    <h2 id="scorePlayerPreLoad"></h2>\n    <h2 id="scoreAIPreLoad"></h2>\n    <button class="playAgain">Play again</button>',n.appendChild(a),document.body.appendChild(n);const d=document.createElement("main"),c=document.createElement("section");c.id="player";const h=document.createElement("div");h.classList.add("div-input"),h.innerHTML='\n    <span><h3 class="infoPlayer">Type coordinates for<h4 class="shipWidth">big ship</h4></h3></span>\n    <h3 class="coordXInfo">X</h3>\n    <input id="coordinateX" type="number" min="0" max="9" />\n    <h3 class="coordYInfo">Y</h3>\n    <input id="coordinateY" type="number" min="0" max="9" />\n    <h4 class="positionInfoPlayer" style="width:100%;text-align:center;">Position(vertical,horizontal)</h4>\n    <input style="width:30%;" id="position" type="text" />\n    <button id="placeShip">Place ship</button>\n    ',c.appendChild(h);const l=document.createElement("div");l.id="gameBoardPlayer";const y=document.createElement("div");y.id="divHolder",l.appendChild(y),c.appendChild(l),d.appendChild(c);const u=document.createElement("section");u.id="ai";const x=document.createElement("h2");x.innerText="AI GameBoard",u.appendChild(x);const m=document.createElement("div");m.id="gameBoardAI";const p=document.createElement("div");p.id="divAIHolder",m.appendChild(p),u.appendChild(m),d.appendChild(u),d.classList.add("hidden");const g=document.createElement("section");g.innerHTML='<div class=\'scoreHolder\'>\n    <span><span><h2 id="yourName">YourName</h2></span><h2 class="playerScore">0</h2></span>\n    <h2 class="aiScore"><span>AI</span><br/>0</h2></span>',g.style="width:100vw;height:10vh",document.body.appendChild(d),document.body.appendChild(g)})(),(()=>{const e=document.querySelector(".submitMyName"),t=document.querySelector(".preLoad div input");e.addEventListener("click",(()=>{""==t.value?alert("Type your name"):(i.welcome(),document.querySelector(".preLoad").classList.add("hidden"),document.querySelector("main").classList.remove("hidden"),o("player"))}))})();const l=document.getElementsByClassName("gameBoardDiv"),y=document.querySelector(".preLoad"),u=document.querySelector("main");document.querySelector("#placeShip").addEventListener("click",(()=>{if(!0===h)return;const e=document.querySelector("#coordinateX").value,t=document.querySelector("#coordinateY").value,n=document.querySelector("#position").value,r=document.querySelector(".shipWidth");let l=3;if(i.gameboard.ships.length>=2&&(l=2),i.gameboard.ships.length>=5&&(l=1),(8!=e&&9!=e||"horizontal"!==n||3!=l)&&!(9==e&&"horizontal"===n&&2==l||(8==t||9==t)&&"vertical"===n&&3==l||9==t&&"vertical"===n&&2==l||""===e||""===t||""===n)){if(e>=0&&e<10&&t>=0&&t<10){if("vertical"!==n&&"horizontal"!==n)return;i.gameboard.addShip(e,t,l,n),i.gameboard.ships.length>=2&&(r.innerHTML="medium ship"),i.gameboard.ships.length>=5&&(r.innerHTML="small ship")}if(9===i.gameboard.ships.length){o("AI"),document.querySelector("#placeShip").setAttribute("disabled",!0),setTimeout((()=>{s.init()}),200),document.querySelector("#gameBoardPlayer").style="opacity:0.7";const e=document.querySelector(".div-input");e.innerHTML=`<h2>${i.welcome()} GameBoard</h2>`,e.style="font-size:20px",window.scrollTo(0,1500),(()=>{const e=document.querySelectorAll(".gameBoardDivAI"),t=document.querySelectorAll(".gameBoardDiv"),n=Array.from(e);let r=[];n.forEach((t=>{t.addEventListener("click",(()=>{let a=n.indexOf(t).toString();if(-1===r.indexOf(+a)){let t,n;if(a>10?(a.split(" "),t=a[1],n=a[0]):10==a?(t=0,n=1):(t=a,n=0),r.push(+a),s.gameboard.receiveAttack(+t,+n),e[+a].style="background-color:green",h("AI"),document.querySelector(".playerScore").innerHTML=s.gameboard.sunkedShips,9===s.gameboard.sunkedShips)return void c(i.welcome(),s.gameboard.sunkedShips,i.gameboard.sunkedShips);o()}else document.querySelector(".div-input").innerHTML=`<h2>${i.welcome()} GameBoard</h2><br/>\n                    <span class="warning" style="font-size:1em">You cant shoot two times in the same place</span>`,window.scrollTo(0,0)}))}));const o=()=>{let e=+Math.floor(100*Math.random()),n=a[e].x,r=a[e].y;if(d.length>0)for(;d.includes(+e);)e=Math.floor(100*Math.random()),n=a[e].x,r=a[e].y;d.push(e);let o=0;o=0==r?n:10*r+n,i.gameboard.receiveAttack(n,r),document.querySelector(".aiScore").innerHTML=`AI <br/>${i.gameboard.sunkedShips}`,9!==i.gameboard.sunkedShips?(t[o].style="background-color:red",h("player")):c("AI",s.gameboard.sunkedShips,i.gameboard.sunkedShips)},h=n=>{if("AI"===n){let t=s.gameboard.hitsMissed;for(let n=0;n<t.length;n++)e[t[n]].innerHTML="x",e[t[n]].style="background-color:blue"}else if("player"===n){let e=i.gameboard.hitsMissed;for(let n=0;n<e.length;n++)t[e[n]].innerHTML="x",t[e[n]].style="background-color:blue"}}})(),h=!0}}})),document.querySelector(".playAgain").addEventListener("click",(()=>{location.reload()}))})();